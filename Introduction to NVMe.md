## NVMe
NVMe是一种Host与SSD之间通讯的协议，它在协议栈中隶属高层。
![picture](https://github.com/Raranoo/learnSSD/blob/master/structure.jpg)
***
### 定义 
NVMe属于逻辑设备接口标准，全称**Non-Volatile Memory Express**，即非易失性存储器标准，是使用PCI-E通道的SSD一种规范。NVMe的设计之初就有充分利用到PCI-E SSD的低延时以及并行性，还有当代处理器、平台与应用的并行性。SSD的并行性可以充分被主机的硬件与软件充分利用，相比与现在的AHCI标准，NVMe标准可以带来多方面的性能提升。  
***
### 优势
* **延时更低**  &#160; &#160;造成硬盘存储时延迟的三大因素，存储介质本身、控制器，以及软件接口标准。比起AHCI，NVMe可以大幅度降低控制器和软件接口部分的延迟，原因有以下两个：NVMe面向的是PCIe SSD，原生PCIe主控与CPU直接相连，而不是传统方式，通过南桥控制器中转，再连接CPU；在软件层方面，NVMe标准的延时只有AHCI的一半不到，NVMe精简了调用方式，执行命令时不需要读取寄存器;而AHCI每条命令则需要读取4次寄存器，一共会消耗8000次CPU循环，从而造成大概2.5微秒的延迟。
* **IOPS大增**  &#160; &#160;IOPS=队列深度/ IO延迟，故IOPS的性能，与队列深度有较大的关系。市面上性能不错的SATA接口SSD，在队列深度上都可以达到32，然而这也是AHCI所能做到的极限。但目前高端的企业级PCIe SSD，其队列深度可能要达到128，甚至是256才能够发挥出最高的IOPS性能。而NVMe标准下，最大的队列深度可达64000。此外，NVMe的队列数量也从AHCI的1，提高了64000。
* **更省电**  &#160; &#160;NVMe加入了自动功耗状态切换和动态能耗管理功能，设备从Power State 0闲置50ms后可以切换到Power State 1，继续闲置的话，在500ms后又会进入功耗更低的Power State 2，SSD在闲置时可以把功耗控制在极低的水平，在功耗管理上NVMe标准的SSD会比现在主流的AHCI SSD拥有较大优势，使得其在移动设备的应用更具竞争力。另外一个原因是数据传输时没有中间转接过程所产生的功耗。
* **驱动适用性广**  &#160; &#160;NVMe标准的出现解决了这个问题，NVMe SSD可以很方便的匹配不同的平台、系统，无需厂家提供相应的驱动就可以正常工作，目前Windows、Linux、Solaris、Unix、VMware、UEFI等都加入了对NVMe SSD的支持。
